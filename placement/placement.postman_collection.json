{
	"info": {
		"_postman_id": "eb88a480-919c-4f21-905b-eb3a674d51de",
		"name": "placement",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "open api",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "5cbc0cdb-37e3-476b-bbe9-d449b9ee69db",
						"exec": [
							"var sdk_app_id = 'a5f86dd2553f15'",
							"var sdk_app_key = '7c5bee9f388ccb7ea9b486354bfa30d8'",
							"var sdk_app_pl = 'b5f9ffaf917544'",
							"",
							"// var sdk_app_id = data.sdk_app_id",
							"// var sdk_app_key = data.sdk_app_key",
							"// var sdk_app_pl = data.sdk_app_pl",
							"pm.environment.set(\"variable_key\", \"variable_value\");",
							"",
							"// console.log(\"执行\"+sdk_app_id);",
							"var p1_data = `{",
							"  \"app_id\": \"`+sdk_app_id+`\",",
							"  \"app_vc\": \"6.5.4\",",
							"  \"app_vn\": \"6.5.4\",",
							"  \"brand\": \"aaaaapple\",",
							"  \"gp_ver\": \"13.8.16-all [0] [PR] 235060107\",",
							"  \"language\": \"zh\",",
							"  \"mcc\": \"\",",
							"  \"mnc\": \"\",",
							"  \"model\": \"\",",
							"  \"network_type\": \"-4444444\",",
							"  \"nw_ver\": {",
							"    \"adcolony\": \"\", ",
							"    \"applovin\": \"9.1.3\", ",
							"    \"baidu\": \"8.8031\", ",
							"    \"chartboost\": \"7.2.0\", ",
							"    \"facebook\": \"5.1.0\", ",
							"    \"flurry\": \"Flurry_Android_279_11.2.0\", ",
							"    \"gdt\": \"4.20\", ",
							"    \"inmobi\": \"7.1.0\", ",
							"    \"ksyun\": \"\", ",
							"    \"mobpower\": \"MP_4.06.00\", ",
							"    \"mobvista\": \"MAL_9.6.01\", ",
							"    \"mopub\": \"5.3.0\", ",
							"    \"oneway\": \"2.1.3\", ",
							"    \"tapjoy\": \"11.12.2\", ",
							"    \"toutiao\": \"1.9.8.2\", ",
							"    \"unityad\": \"3.0.0\"",
							"    },",
							"  \"orient\": 1, ",
							"  \"os_vc\": \"9.0.1\",",
							"  \"os_vn\": \"9.0.1\",",
							"  \"package_name\":\"com.superapp.filemanager\",",
							"  \"pl_id\": \"`+sdk_app_pl+`\",",
							"  \"platform\": \"1\",",
							"  \"ps_id\": \"\",",
							"  \"screen\": \"1080*1920\",",
							"  \"sdk_ver\": \"UA_5.7.5\",",
							"  \"session_id\": \"\",",
							"  \"system\": 1,",
							"  \"timezone\": \"GMT+08:00\",",
							"  \"upid\":\"xx\",",
							"  \"channel\":\"qqqqqq\",",
							"  \"sub_channel\":\"QQQ\",",
							"  \"ua\":\"ew+ewe=ewe/ggfgfg\",",
							"  \"first_init_time\":1599721246000,",
							"  \"custom\":{\"age\":\"45岁以上\"},",
							"  \"sy_id\":\"\",",
							"  \"cs_cl\":\"1\"",
							"}`",
							"// ",
							"",
							"var p2_data = `{",
							"  \"android_id\": \"PPLL23\", ",
							"  \"device_id\":\"PPLL23\",",
							"  \"idfa\":\"\",",
							"  \"idfv\":\"ios11111111\",",
							"  \"gaid\": \"000-000\",",
							"  \"oaid\":\"\"",
							"",
							"}`",
							"",
							"// 加密p1",
							"function encryption_p1(data)",
							"{",
							"    return (new Buffer(data, 'utf8')).toString('base64');",
							"}",
							"",
							"// 加密p2",
							"function encryption_p2(data)",
							"{",
							"    return (new Buffer(data, 'utf8')).toString('base64');",
							"    ",
							"}",
							"",
							"var encode_data1 = encryption_p1(p1_data);",
							"var encode_data2 = encryption_p2(p2_data);",
							"var temp = sdk_app_key+'api_ver=1.0&'+'p='+encode_data1+'&p2='+encode_data2",
							"var sign_data = CryptoJS.MD5(temp).toString();",
							"console.log(encode_data1);",
							"console.log(encode_data2);",
							"console.log(sign_data);",
							"",
							"pm.environment.set(\"p1\", encode_data1);",
							"pm.environment.set(\"p2\", encode_data2);",
							"pm.environment.set(\"sign\", sign_data);",
							"// console.log('执行 placement_release 接口');",
							"",
							"",
							"",
							"",
							"",
							"",
							"",
							"",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "a3e277af-5557-40bb-9327-b1c2b336ea46",
						"exec": [
							"function decryption(data)",
							"{",
							"    var CHARS  = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';",
							"    var CHARS1 = 'dMWnhbeyKr0J+IvLNOx3BFkEuml92/5fjSqGT7R8pZVciPHAstC4UXa6QDw1gozY=';",
							"    var chars_combine={};",
							"    var result=''",
							"    for(var i = 0;i < CHARS.length; i++) chars_combine[CHARS1[i]] = CHARS[i];",
							"    for(var j = 0;j< data.length;j++) result += chars_combine[data[j]];",
							"    ",
							"    var base64decode = (new Buffer(result, 'base64').toString('utf8'))",
							"    return base64decode;",
							"}",
							"",
							"",
							"var de_respone = decryption(pm.response.text());",
							"pm.environment.set(\"req_reponse\", de_respone);",
							"var jsonData = JSON.parse(de_respone);",
							"",
							"pm.test(\"Response_release\", function () {",
							"    pm.expect(jsonData).to.have.property('code', 0)",
							"});",
							"//console.log(jsonData['data']);",
							"",
							"",
							"pm.environment.unset(\"p1\");",
							"pm.environment.unset(\"p2\");",
							"pm.environment.unset(\"sign\");",
							"",
							"",
							"",
							""
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"p\": \"{{p1}}\",\r\n    \"p2\": \"{{p2}}\",\r\n    \"sign\": \"{{sign}}\",\r\n    \"api_ver\":\"1.0\"\r\n}"
				},
				"url": {
					"raw": "http://test.aa.toponad.com/v1/open/placement?",
					"protocol": "http",
					"host": [
						"test",
						"aa",
						"toponad",
						"com"
					],
					"path": [
						"v1",
						"open",
						"placement"
					],
					"query": [
						{
							"key": "",
							"value": null
						}
					]
				}
			},
			"response": []
		}
	],
	"protocolProfileBehavior": {}
}